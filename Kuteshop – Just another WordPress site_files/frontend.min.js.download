/**
 * frontend.js
 *
 * @author Your Inspiration Themes
 * @package YITH WooCommerce Quick View
 * @version 1.0.0
 */

jQuery(document).ready(function(t){"use strict";if("undefined"!=typeof yith_qv){var n=t(document).find("#yith-quick-view-modal"),i=n.find(".yith-quick-view-overlay"),o=n.find("#yith-quick-view-content"),e=n.find("#yith-quick-view-close");t.fn.yith_quick_view=function(){t(document).off("click",".yith-wcqv-button").on("click",".yith-wcqv-button",function(i){i.preventDefault();var o=t(this),e=o.data("product_id"),d=!1;"undefined"!=typeof yith_qv.loader&&(d=!0,o.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),n.hasClass("loading")||n.addClass("loading"),t(document).trigger("qv_loading")),a(o,e,d)})};var a=function(i,e,a){t.post(yith_qv.ajaxurl,{action:"yith_load_product_quick_view",product_id:e},function(e){o.html(e),yith_qv.is2_2&&o.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');var d=o.find(".variations_form");d.wc_variation_form(),d.trigger("check_variations"),"undefined"!=typeof t.fn.yith_wccl&&d.yith_wccl(),"undefined"!=typeof t.fn.prettyPhoto&&o.find("a[data-rel^='prettyPhoto'], a.zoom").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),n.hasClass("open")||(n.removeClass("loading").addClass("open"),a&&i.unblock()),t(document).trigger("qv_loader_stop")})},d=function(){i.on("click",function(t){a()}),t(document).keyup(function(t){27===t.keyCode&&a()}),e.on("click",function(t){t.preventDefault(),a()});var a=function(){n.removeClass("open").removeClass("loading"),setTimeout(function(){o.html("")},1e3)}};d(),t.fn.yith_quick_view(),t(document).on("yith_infs_adding_elem yith-wcan-ajax-filtered",function(){t.fn.yith_quick_view()})}});